---
layout: page
title:  "基本知识-----PHP"
subtitle: "初窥门径"
date:   2020-09-16 21:21:21 +0530
categories: ["WEB基础知识"]
---

## 环境

### 什么是环境

- 环境就是条件
- 你要PHP要装些什么东西才能使电脑读懂PHP并执行PHP里面的语言

### 如何配置环境

- 主流的php环境是LAMP架构
    - linux+apache+mysql+php
- 初学者搭配环境是WAMP结构
    - windows+apache+mysql+php

### 配置环境方式
- linux安装方式
    - 源码包安装
    - rpm包安装  
    - 集成软件安装（推荐）
- windows安装方式
    - 单个下载安装  
    - 集成环境安装（推荐）
        - phpstudy

## 代码执行逻辑

- 想在电脑中使用php语法与计算机交流 一定得需要一个翻译工具——php解析器
- apache的“php”模块中使用的是nginx 并且使用的是php-fpm作为php的解析器
- 在代码执行中是自上而下的


## 函数

### 什么是函数

- 函数(function)是指一段完成指定任务的已命名代码段
- 函数可以给参数, 参数会影响代码块的执行结果
- 并且我们的函数一定要有返回值(结果)
- 只要写上圆括号的就是函数

### 函数的类型

- 自定义函数
- 系统函数
- 排序函数
- 数组函数
    - 拆分 合并 分解 结合的函数
- 引用函数
    - 引用叁数, 需要在形参的$前面加上一个&符号 
    - 引用参数必须(只能)接收一个变量
    - 实参只要是个值, 其实就是被外部的变量创建一个在内部的别名, 有这个别名, 就可以访问同样的位置
- 匿名函数
    - 一个没有名字的函数
    - 如何定义
        - 变量名 = function () {}
- 回调函数
    - 在一个函数内去调用另一个函数
    - php系统调用用户自定义的函数,必须要通过一个代理函数来调用
- 递归函数
    - 一个函数在它的函数体内调用它自身称为递归调用。 这种函数称为递归函数
    ```php
    <?php
    function chen($num)
    {
        echo $num, "<br>";
        if ($num > 0) {
            chen($num - 1);//  函数内部的变量是局部变量
        }
        echo $num, "<br>";  // 函数的每一次调用都当成是一个独立的函数
    }
    chen(3);   //32100123
    echo "<hr>";
    ```

### 定义

- 一个函数可由以下的语法来定义
```php
function 函数的名称(参数1, 参数2, 参数3...)
{
    # 函数体
    # 写代码

    return 返回值;
}
```

### 函数的命名规则

- 允许出现字母数字下划线
- 不允许数字开头
- 名称是不区分大小写的
- 函数名称不能重复

### 参数

- 函数内部相当于一个密室, 函数里面是无法获取到外边的变量, 同样里面的变量外面也无法获取
- 参数之间都是用逗号分隔
- 形参
    - 形式上的参数 
    - 写在定义函数的函数名后的圆括号内参数叫做形参
    - 形参可以直接理解为函数的变量
- 实参
    - 实际上的参数 
    - 写在调用(使用)函数的圆括号内的参数叫做实参
- 两者关系
    - 可以理解为形参是变量, 实参是赋值给变量的值
- 默认参数
    - 在形参后面加上一个等号, 然写一个值, 这个值就是形参的默认值
- 可变参数
    - 在执行过程中，函数的参数是任意变换的
    - 目的是为了应对不确定的参数个数
    - 可变参数的系统函数
        - func_get_args(); 获取当前函数接收到的所有实参, 返回结果是数组
        - func_num_args(); 获取当前函数接收到的参数数量, 返回结果是数字
        - func_get_arg(索引);  获取指定序号(索引)的参数


### 返回值

- 作用: 让代码能够接收你运行结果,而不是直接把显示到网页
- 返回值只能有一个,return 之后函数就执行结束

## 变量

- 定义
    - 可以给PHP变量赋予某个值或者表达式
- - 变量的作用范围
    - 局部变量：在函数内定义变量
    - 全局变量：定义完全体都能使用的变量：global
    - 静态变量：定义后共享状态： static
    - 引用变量：给一个变量多加一个名字
- 变量规则
    - 变量以$符号开始，后面跟着变量的名称
    - 变量名必须以字母或者下划线字符开始
    - 变量名只能包含字母数字字符以及下划线（A-z、0-9 和 _ ）
    - 变量名不能包含空格
    - 变量名是区分大小写的
- 预定义变量
- 可变变量
    - 一个变量的变量名可以动态的设置和使用
    ```php
    <?php
    $a = "hello";
    $hello = "焕";
    $焕 = "1";
    var_dump($a);// 调试打印
    var_dump($$a);// 可变变量 $$a = > $hello
    ```
- 引用变量
    - 不同的名字访问同一个变量内容
    - 就是说一个值可由多个名字变量
    
## 类型

- 四种标量类型
    - boolean（布尔型）
        - 表达真值，可以为TRUE或FALSE
        ```php
        <?php
        $bool = true;  //表真
        $bool = false; //表假
        ```
    - integer（整型）
        - 表示的是整数，正负皆可
        ```php
        <?php
        $int = 10;
        $int = -10;
        ```
    - float（浮点型)
        - 带小数点的数值
        ```php
        <?php
        $float = 3.14;
        $float = -3.14;
        ```
    - string（字符串）
        - 由单双引号定义
        - 单引号不能解析特殊字符(\t \r \n), 而双引号可以解析
        - 单引号不能解析变量, 而双引号可以解析变量
        ```php
        <?php
        $str = "str";
        $str = 'str';
        ```
- 三种复合类型
    - array（数组）
        - 定义: 数组实际上是一个有序映射。映射是一种把values关联到keys的类型
        - 语法
            - 可以使用array() 语言结构来新建一个数组。
            - 它接受任意数量用逗号分隔的 键（key） => 值（value）对
            ```php
            <?php
            array(  key =>  value
                , ...
            )
            ```
        - 键（key）可是是一个整数 integer 或字符串 string
        - 值（value）可以是任意类型的值
    - object（对象）
        - 创建一个新的对象 object，使用 new 语句实例化一个类
    - callable（可调用）
- 两种特殊类型
    - resource（资源）
        - 资源 resource 是一种特殊变量，保存了到外部资源的一个引用
        - 资源是通过专门的函数来建立和使用的
    - NULL（无类型）
        - 定义
            - 表示一个变量没有值
            - NULL类型唯一可能的值就是NULL
        - 变量为null的情况
            - 被赋值为 NULL
            - 尚未被赋值
            - 被 unset()
        - 语法
            - NULL 类型只有一个值，就是不区分大小写的常量 NULL
            ```php
            <?php
            $var = NULL; 
            ```

### 数据类型的转换

- 强制转换
    - getType(变量)  获取一个变量的类型
    - setType(变量, 类型)  强制设置变量的类型
- 自动转换
    - 在数据的运算过程中,php自动改变数据的类型

## 类与对象

### 什么是类

- 类是对象的抽象表示
- 一个类可以包含有属于自己的常量，变量以及函数

### 语法

- 每个类的定义都以关键字 class 开头，
- 后面跟着类名，后面跟着一对花括号，里面包含有类的属性与方法的定义
```php
<?php
class 类名
{
    成员属性(变量, 和常量)        
    成员方法(自定义函数)
}
```
- 属性 
  - 类的变量成员叫做"属性"，或者叫"字段"、"特征"，在本文档统一称为"属性"。
  - 属性声明是由关键字 public，protected 或者 private 开头，然后跟一个普通的变量声明来组成。
```
在类的成员方法里面，可以用 ->（对象运算符）：$this->property（其中 property 是该属性名）这种方式来访问非静态属性。
静态属性则是用 ::（双冒号）：self::$property 来访问。
```

### 类名命名规范

- 大小写字母和数字和下划线
- 数字不能开头
- 首字母必须大写
- 类名通常使用英文单词来命名, 首字母大写

### 如何使用一个类

- 类需要通过 new(实例化) 来变成对象
```php
<?php
$A = new Peoples();
var_dump($A);
```
### 对象
- 类的实例
```php

$mercedes = new Car ();
// mercedes 是 car类的对象
```
- 继承
    - 含义
        - 继承性是子类自动共享父类数据结构和方法的机制，这是类之间的一种关系
    - 作用
        - 在定义和实现一个类的时候，可以在一个已经存在的类的基础之上来进行，把这个已经存在的类所定义的内容作为自己的内容，并加入若干新的内容
    - 写法
        - class 继承的类名  extends 被继承的类名
```php

 class Child extends Parent {
   // 代码部分
}

```
- 方法重写
    - 如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖（override），也称为方法的重写
- 访问控制
    - 对属性或方法的访问控制
    - 写法
        - 通过在前面添加关键字 public（公有），protected（受保护）或 private（私有）来实现的
        >- public（公有）：公有的类成员可以在任何地方被访问。
        >- protected（受保护）：受保护的类成员则可以被其自身以及其子类和父类访问。
    	>- private（私有）：私有的类成员则只能被其定义所在的类访问。
- 属性的访问控制
     - 类属性必须定义为公有，受保护，私有之一
     - 在外部调用时 只能调用公有（public），调用其他两个会出现致命错误
- 方法的访问控制
     - 与属性的访问控制一样

- 接口
    - 使用接口（interface），可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容。

    - 接口是通过 interface 关键字来定义的，就像定义一个标准的类一样，但其中定义所有的方法都是空的。

    - 接口中定义的所有方法都必须是公有，这是接口的特性。

    - 要实现一个接口，使用 implements 操作符。类中必须实现接口中定义的所有方法，否则会报一个致命错误。类可以实现多个接口，用逗号来分隔多个接口的名称
### 类常量
- 含义
    - 把在类中始终保持不变的值定

- 定义 
    - 使用const来定义
    - 使用类名或self来调用
    - 常量必须是一个定值
    - 常量名字我们通常使用大写
- 如何获取常量通过在前面添加关键字 public（公有），protected（受保护）或 private（私有）来实现的
    - 通过类名获取
        - :: 静态访问符, 访问类中的静态资源(常量, 静态方法)
    - 使用 self 获取
        - self 只能在类里面, 所以在外部获取只能使用类名



## 常用第三方

### composer管理工具

- 定义
    - php的包管理工具
    - 一个帮助我们下载组件/包/模块的工具
- 安装
    - 进入网址按照步骤下载 `https://www.phpcomposer.com/`
    - php -r "": 用php去解析 双引号中的内
    - copy: 复制一个文件到另外一个新的文件中
    - unlink函数: 删除一个文件
    - 全局安装

### laraval框架

- 框架的定义
    - 框架是一堆常用的模块组成的具有特定目录结构的一个空项目
    - 框架跟程序的种类 没有关系
- 安装
    - 配置阿里云镜像
        - `composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/`
    - 查看composer的配置项 `composer config -l -g`
    - 下载laravel `composer create-project laravel/laravel  "5.5.*"`
    - 生成key `php artisan key:generate`

## 常用模块(组件/包)

- 定义
    - 模块就是一些特殊（特定）的功能用php代码实现我们要想实现类似的功能需要下载这块的代码
    - 组件都具有高度和抽象性
- 作用: 提供接口或者方法供别人调用
- 常用模块
    - 错误异常模块
        - 系统自带
            - E_ERROR 致命的运行时错误(阻止脚本执行)
            - E_WARNING 运行时警告
            - E_PARSE 语法中解析错误
            - E_NOTICE 运行时注意消息
        - 自定义错误处理
            - error_reporting(0) 屏蔽程序中的错误
            - set_error_handler() 指定自己定义的错误处理函数,设计优美的错误页面
        - 修改错误日志
            -  error_reporting = E_ALL; 其他级别
            - display_errors = Off; 关闭错误报告
            - log_errors = On;打开错误日志
    - 日期和时间
        - UNIX时间戳
            - UNIX系统保存1970年1月1日零点(UTC/GMT)开始起到当前时间所经历的秒数，以一个32位整数表示
        - mktime()函数
            - 依次传入一下属性即可得到UNIX时间戳
                - hour
                - minute
                - second
                - month
                - day
                - year
        - strtotime()
            - 将英语自然语言表述的时间转换为时间戳
        - getdate()
            - 通过getdate()函数，传入一个时间戳，返回一个记录时间/日期的数组
    - 文件处理模块
        - 文件属性处理函数
            - file_exists 检查文件或目录是否存在
            - filemtime() 获得文件创建时间
            - filatime() 获得文件修改时间
            - stat() 获取文件的大部分属性
        - 目录解析处理函数
            - basename()
            - dirname()
                - 分别返回文件的路径和文件名称
        - 目录遍历处理函数
            - opendir()：打开一个目录并返回其句柄
            - readdir()：读取一个目录句柄，返回当前指针位置的一个文件，并把指针向后移动一位
            - closedir()：关闭目录句柄
            - rewinddir()：重置目录指针
        - 统计目录大小
            -  filesize() 统计一个文件大小
        - 复制目录
            - 使用mkdir()创建目录
            - 写个函数遍历目录并且使用copy()命令拷贝所有文件
        - 文件基本操作
            -  fopen()：打开文件并返回其句柄，第二个参数指定使用的文件模式（和其他语言统一）
            - fclose()：关闭一个文件句柄；
            - fwrite()：向指定句柄(第一个参数)写入内容；